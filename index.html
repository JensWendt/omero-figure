---
layout: default
title: OMERO.figure
---

    <!-- MAIN CONTENT -->

    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>

    <script>
      $(function(){

        // var now = Date();

        // function msToTime(s) {
        //   var ms = s % 1000;
        //   s = (s - ms) / 1000;
        //   var secs = s % 60;
        //   s = (s - secs) / 60;
        //   var mins = s % 60;
        //   var hrs = (s - mins) / 60;

        //   return hrs + ':' + mins + ':' + secs + '.' + ms;
        // }

        // Thu Jan 15 2015 23:52:19 GMT+0000 (GMT)  -->  Thu Jan 15 2015
        var formatDate = function formatDate(d) {
          d = new Date(d);
          return ("" + d).split(" ").slice(1,4).join(" ");
        }

        var $tickerList = $("#github_ticker ul");
        var scrollTicker = function scrollTicker() {
          var t = parseInt($tickerList.css('top'), 10);
          t -= 40;
          if (t < -240) t = 0;
          $tickerList.css('top', t + "px");
          setTimeout(scrollTicker, 4000);
        }

        // Get commits data from github, add to page then scroll through.
        $.ajax({
            url: "https://api.github.com/repos/will-moore/figure/commits",
            jsonp: "callback",
            success: function( data ) {
              var commit, message, date, html = "";
              for (var i=0; i<data.length; i++) {
                commit = data[i];
                message = commit.commit.message;
                date = commit.commit.author.date;
                // Ignore merge commits.
                if (message.slice(0, 18) == "Merge pull request") {
                  continue;
                }
                html += "<li>" + formatDate(date) + " <span class='message'>" + message + "</span></li>";
              }
              $(html).appendTo("#github_ticker ul");
              setTimeout(scrollTicker, 4000);
            }
        });

        // On hover over the ticket, wait before showing
        var $github_ticker = $("#github_ticker"),
            hoverTimeout;
        $github_ticker.hover(
          function() {
            if (hoverTimeout) {
              clearTimeout(hoverTimeout);
            }
            hoverTimeout = setTimeout(function(){
              $github_ticker.addClass("hover");
            }, 1000);
          },
          function(){
            if (hoverTimeout) {
              clearTimeout(hoverTimeout);
            }
            $github_ticker.removeClass("hover");
          });
      });
    </script>

    <style type="text/css">
      .github_ticker {
        height: 40px;
        overflow: hidden;
        position: absolute;
        top: 0px;
        width: 100%;
      }
      .github_ticker.hover {
        overflow: visible;
      }
      .github_ticker ul {
        font: 13px/1.4 Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
        position: absolute;
        top: 0px;
        background: white;
        display: table;
        table-layout: fixed;
        width: 100%;
        color: #999;
        border-bottom: 1px solid #e5e5e5;
        -webkit-transition: top 1s;
        transition: top 1s;
        padding-left: 0px;
      }
      .github_ticker li {
        list-style: none;
        display: block;
        height: 40px;
        border-bottom: 1px solid #e5e5e5;
        box-sizing: border-box;
        font-size: 15px;
        padding: 9px
      }
      .github_ticker li .message {
        color: #333;
        font-weight: bold;
        margin-left: 10px;
      }

    </style>

        <div id="github_ticker" class="github_ticker" title="Recent commits to OMERO.figure on GitHub">
          <ul></ul>
        </div>

        <h1 style="margin-top:20px">Fast figures from your OMERO images</h1>

        <!-- <img src="https://raw.github.com/will-moore/figure/gh-pages/images/figure_screenshot_1.png" /> -->
        <iframe width="640" height="360" src="//www.youtube.com/embed/JNFvT8JwY7E?rel=0" frameborder="0" allowfullscreen></iframe>

        <h1 style="margin-top: 10px">Smart figures with metadata</h1>
        <p>OMERO is a server platform for managing biological images. See the
          <a href="http://www.openmicroscopy.org/site">Open Microscopy Site</a> for more info.
          OMERO.figure combines OMERO's powerful image rendering and metadata to provide a
          tool for rapid figure creation. Each panel of the figure becomes a multi-dimensional
          image viewer, allowing you to zoom and pan, adjust rendering settings and even
          scroll through Z and Time.
          Figures can be exported as PDF documents, so you can move seamlessly to
          other editing tools such as Adobe Illustrator.
        </p>

        <h1>Shortcuts for common tasks</h1>
        <iframe width="640" height="360" src="//www.youtube.com/embed/be8RbKi7VJY?rel=0" frameborder="0" allowfullscreen></iframe>
        <p>Many tasks of figure creation are very time consuming when done manually.
          OMERO.figure provides tools to get the job done quickly. All of these features
          work with multiple selected panels at once, making it easy to keep similar
          panels in sync.
          <ul>
            <li><strong>Align to grid</strong>: Snap panels to perfectly-spaced rows and columns.</li>
            <li><strong>Adjust rendering settings</strong>: Toggle channels, change colours and adjust levels.</li>
            <li><strong>Clever labels</strong>: Labels are bound to the chosen spot on each panel and can
              be auto-generated from image metadata.</li>
            <li><strong>Copy and paste</strong>: Duplicate rows or columns instantly, aligned perfectly.</li>
            <li><strong>Scroll Z and Time</strong>: Move image panels through Z and Time dimensions.</li>
            <li><strong>Zoom, Pan and Rotate</strong>: Crop your images simply by zooming, panning and rotating the viewport without ever losing the full image.</li>
            <li><strong>Accurate scalebars</strong>: Use the pixel size metadata from OMERO to add 'live'
              scalebars that update as you zoom.</li>
            <li><strong>Full undo and redo</strong>: For extra convenience.</li>
          </ul>
        </p>

        <iframe width="640" height="360" src="//www.youtube.com/embed/qzSPFGlRHNQ?rel=0" frameborder="0" allowfullscreen></iframe>

        <h1>Power of the web</h1>
        <p>
          You can create beautiful figures in your browser, then share them with others.
          Depending on your OMERO permissions settings, you can even make them public,
          so everyone can explore your figures interactively.
        </p>

        <h1>Try it now!</h1>
        <p>I've created a live demo with several examples, based on figures published in the Journal of Cell Biology.
          This is a 'static' demo app (not hosted on an OMERO server), so you can't save changes. All the image data
          comes from the <a href="http://jcb-dataviewer.rupress.org/">OMERO-powered JCB-DataViewer</a>, where you can also browse the raw data.<br>
          Click figures for demos:
        </p>

        <table class="demo-table">
          <tr>
            <td>
              <a href="http://will-moore.github.io/figure/demo/#file/1"/>
                <img src="images/demo1.png"><br>
                Figure 5: MCAK phosphorylation
              </a>
              <br>
              from <a href="http://jcb.rupress.org/content/179/2/187">Porter et al, JCB 2007</a>.<br>
              See <a href="http://jcb-dataviewer.rupress.org/jcb/browse/105/134/">original data</a>.
            </td>
            <td>
              <a href="http://will-moore.github.io/figure/demo/#file/2"/>
                <img src="images/demo2.png"><br>
                Figure 1: KLP10A and Patronin
              </a>
              <br>
              from <a href="http://jcb.rupress.org/content/203/1/35">Wang et al, JCB 2013</a>.<br>
              See <a href="http://jcb-dataviewer.rupress.org/jcb/browse/7102/22507/">original data</a>.
            </td>
          </tr>
          <tr>
            <td>
              <a href="http://will-moore.github.io/figure/demo/#file/3"/>
                <img src="images/demo3.png"><br>
                Figure 2: Patronin microtubules
              </a>
              <br>
              from <a href="http://jcb.rupress.org/content/203/1/35">Wang et al, JCB 2013</a>.<br>
              See <a href="http://jcb-dataviewer.rupress.org/jcb/browse/7102/22522/">original data</a>.
            </td>
            <td>
              <a href="http://will-moore.github.io/figure/demo/#file/4"/>
                <img src="images/demo4.png"><br>
                Figure 10: PIP3 and F-actin chemotaxis
              </a>
              <br>
              from <a href="http://jcb.rupress.org/content/204/6/1027">Zatulovskiy et al, JCB 2014</a>.<br>
              See <a href="http://jcb-dataviewer.rupress.org/jcb/browse/8106/24483/">original data</a>.
            </td>
          </tr>
        </table>

        <h1>Install instructions</h1>
        <p>
          <ul>
            <li>
              Download the release from the top of this page, unzip and
              rename the unzipped directory to 'figure'.
            </li>
            <li>
              Place 'figure' <strong>within</strong> a directory that is on your PYTHONPATH, or
              in the OMERO <code style="display:inline">lib/python/omeroweb/</code> directory. NB: for OMERO 4.4.9 and earlier, you will
              have to use lib/python/omeroweb/ (other locations not supported).
            </li>
            <li>Add the app to OMERO.web:
              <code> $ bin/omero config append omero.web.apps '"figure"' &nbsp # NB: double quotes</code>
              NB: for OMERO 4.4.x you'll need to 'set' the whole list (append not supported):
              <code> $ bin/omero config set omero.web.apps '["figure"]' &nbsp # OMERO 4.4 only</code>
            </li>
            <li>Display a link to 'Figure' at the top of the webclient: 
              <!-- with 'target' set to open the link in a new tab: -->
              <code style="width:650px">
                <!-- $ bin/omero config append omero.web.ui.top_links '["Figure", "figure_index", {"target": "figure"}]' -->
                $ bin/omero config append omero.web.ui.top_links '["Figure", "figure_index"]'

              </code>
            </li>
            <li>Restart web: 
              <code>
                $ bin/omero web stop<br>
                $ bin/omero web start
              </code>
            </li>
          </ul>
          <h4>To enable PDF generation:</h4>
          <ul>
            <li>Install <a href="http://www.reportlab.com/software/installation/">reportlab</a> PDF python package.<br>
              In the simplest case: <code>$ pip install reportlab</code> OR  <code>$ easy_install reportlab</code><br>
              NB: For python 2.6, you'll need Reportlab 2.7: <code>$ pip install reportlab==2.7</code>
            </li>
            <li>Upload PDF generation script (need to be Admin)
              <code style="width:700px">
                $ cd figure/scripts   &nbsp &nbsp &nbsp # NB: important to be in this directory<br>
                $ path/to/bin/omero script upload omero/figure_scripts/Figure_To_Pdf.py --official
              </code>
            </li>
          </ul>
        </p>

        <h1>Update instructions</h1>
        <p>
          <ul>
            <li>
              To update an existing install of OMERO.figure to the latest release, download it,
              unzip and replace the contents of the current /figure
              directory with the contents of the unzipped directory.
            </li>
            <li>Replace PDF generation script (need to be Admin)
              <code style="width:700px">
                $ cd figure/scripts   &nbsp &nbsp &nbsp # NB: important to be in this directory<br>
                # List scripts to get the ID of omero/figure_scripts/Figure_To_Pdf.py<br>
                $ path/to/bin/omero script list<br>
                $ path/to/bin/omero script replace &ltscriptId&gt omero/figure_scripts/Figure_To_Pdf.py
              </code>
            </li>
            <li>Restart web:
              <code>
                $ bin/omero web stop<br>
                $ bin/omero web start
              </code>
            </li>
          </ul>
        </p>
